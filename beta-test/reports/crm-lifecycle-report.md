# DreamSync CRM/Lifecycle 전략 분석 보고서

> 작성일: 2026-02-21
> 분석 범위: 사용자 생애주기, 세그먼트, 알림, 리텐션, 코치 시스템, 재참여 전략

---

## 1. 사용자 생애주기 (User Lifecycle) 정의

DreamSync의 사용자 생애주기는 5단계로 구분된다. 각 단계별 행동 지표와 전환 조건을 분석한다.

### 1.1 단계 정의

| 단계 | 이름 | 기간 | 핵심 행동 | 전환 조건 |
|------|------|------|-----------|-----------|
| L0 | **신규 가입** | D0~D1 | 회원가입/게스트 로그인 + 온보딩 | 온보딩 완료(`onboardingCompleted: true`) |
| L1 | **탐색기** | D2~D7 | 첫 꿈 기록, 첫 체크인, 첫 예보 확인 | 3일 이상 활동(꿈 또는 체크인) |
| L2 | **활성 사용** | W2~W4 | 주 3일+ 체크인, 주 2개+ 꿈 기록, 코치 플랜 실행 | 주간 목표 50%+ 달성 x 2주 연속 |
| L3 | **습관화** | M2+ | 주 5일+ 체크인, streak 14일+, 코치 플랜 60%+ 이행 | 4주 연속 주간 목표 70%+ 달성 |
| L4 | **이탈 위기** | 비활동 3일+ | 활동 급감, 알림 미응답, streak 끊김 | 7일 이상 무활동 |
| L5 | **이탈** | 비활동 14일+ | 완전 비활동 | 30일 무활동 시 dormant 분류 |

### 1.2 현재 코드 기반 생애주기 지원 현황

**지원됨:**
- `onboardingCompleted` 플래그로 L0 → L1 전환 관리 (`useAuthStore.js:114`)
- `getStreak()` 함수로 연속 기록 추적 (`useCheckInStore.js:165-186`)
- `getWeeklyCompletionRate()` 함수로 주간 활성도 측정 (`useCheckInStore.js:207-210`)
- `getWeeklyProgress()` 함수로 목표 달성률 추적 (`useGoalStore.js:76-122`)

**미구현:**
- 생애주기 단계(L0~L5)를 명시적으로 추적하는 state 없음
- 각 단계 전환 시점의 이벤트/트리거 시스템 부재
- 이탈 위기(L4) 감지를 위한 비활동 일수 계산 로직 없음
- 재활성화(L5 → L2) 경로의 전용 플로우 없음

### 1.3 개선 제안

1. `useLifecycleStore` 신설 - 사용자별 현재 단계, 전환 이력, 마지막 활동일 추적
2. 단계 전환 시 자동 이벤트 발생 → 알림/코치 플랜 트리거 연동
3. L4 진입 시 "복귀 알림" 자동 스케줄링

---

## 2. 세그먼트 전략 (User Segmentation)

### 2.1 행동 기반 세그먼트

현재 코드에서 추출 가능한 행동 데이터를 기반으로 4개 주요 세그먼트를 정의한다.

| 세그먼트 | 정의 기준 | 추정 비율 | 핵심 KPI |
|----------|-----------|-----------|----------|
| **초보 탐색자** | 가입 7일 이내, 꿈 < 3개, 체크인 < 3회 | 30~40% | FTUE 완료율, D3 리텐션 |
| **루틴 빌더** | 주 3~4일 활동, streak 5~13일 | 25~30% | 주간 목표 달성률, 코치 이행률 |
| **헤비 유저** | 주 5일+ 활동, streak 14일+, 코치 60%+ | 10~15% | UHS 점수 추이, 예보 정확도 |
| **이탈 위험** | 최근 3일 무활동 또는 streak 끊김 | 20~30% | 복귀율, 알림 CTR |

### 2.2 감정/패턴 기반 세그먼트 (고급)

DreamSync의 고유 데이터를 활용한 감정 세그먼트:

| 세그먼트 | 데이터 소스 | 활용 |
|----------|-------------|------|
| **스트레스 고위험** | `stressLevel >= 4` 3일 연속 (`patternAlertService.js:62-69`) | 케어 알림 + 이완 콘텐츠 추천 |
| **컨디션 저하** | `avgCondition <= 2.5` 3일 연속 (`patternAlertService.js:52-59`) | 회복 루틴 코치 플랜 자동 생성 |
| **수면 부족** | `avgSleepHours < 6` (`patternAlertService.js:73-84`) | 취침 시간 조정 넛지 |
| **악몽 패턴** | `intenseDreamCount >= 2` 최근 5개 꿈 (`patternAlertService.js:96-104`) | 안정화 콘텐츠 + 전문가 연계 제안 |

### 2.3 현재 코드 분석

**강점:**
- `patternAlertService.js`가 이미 compound-risk, stress-spike, condition-drop, sleep-deficit, nightmare-pattern 5가지 시그널을 탐지
- `coachPlanService.js`에서 경보 → 구체적 행동 태스크 매핑 완비 (ALERT_TASK_MAP)
- `goalRecoveryService.js`에서 목표 미달 시 복구 플랜 자동 생성

**약점:**
- 세그먼트를 명시적으로 분류/저장하는 시스템 없음
- 세그먼트별 차별화된 알림 메시지/빈도 전략 부재
- 코호트(가입일 기준) 추적 데이터 없음

---

## 3. 알림 전략 분석 (Notification Strategy)

### 3.1 현재 알림 시스템 구조

`useNotifications.js` 분석 결과, 현재 3종의 로컬 알림이 구현되어 있다:

| 알림 ID | 유형 | 기본 시간 | 메시지 | 반복 |
|---------|------|-----------|--------|------|
| `MORNING_REMINDER` (1) | 아침 꿈 기록 | 07:00 | "어젯밤 꿈을 기억하시나요?" | 매일 |
| `EVENING_REMINDER` (2) | 저녁 체크인 | 21:00 (설정: 22:00) | "오늘 하루는 어땠나요?" | 매일 |
| `WEEKLY_REPORT` (3) | 주간 리포트 | 일요일 10:00 | "이번 주 리포트가 준비되었어요" | 매주 |

### 3.2 알림 설정 플로우

```
온보딩 3단계 → 알림 허용 → 아침 07:00 + 저녁 21:00 + 주간 리포트 자동 설정
                         ↓
                    Settings → NotificationSettings → 시간 개별 조정/토글
```

**온보딩 시 알림 설정 (`Onboarding.jsx:61-80`):**
- `requestPermission()` → 권한 획득 즉시 3종 알림 일괄 등록
- 실패 시 `enabled: false`로 설정 (사일런트 실패, 재시도 없음)

**설정 페이지 (`NotificationSettings.jsx`):**
- 아침/저녁 개별 토글 + 시간 선택 (time input)
- `weeklyReport` 토글이 UI에 노출되지 않음 (설정만 존재)

### 3.3 알림 시스템 강점

1. **Capacitor LocalNotifications** 기반으로 네이티브 푸시 알림 지원
2. **권한 관리** 완비: `checkPermission`, `requestPermission` 분리
3. **일괄 적용** API: `applyNotificationSettings()`로 설정 변경 시 한번에 갱신
4. **테스트 알림**: `scheduleTestNotification()`으로 디바이스 테스트 가능

### 3.4 알림 시스템 약점 및 개선점

| 문제 | 현재 상태 | 개선안 |
|------|-----------|--------|
| 웹 환경 미지원 | `Capacitor.isNativePlatform()` 체크로 웹에서 알림 비활성 | Web Push API 또는 PWA 알림 추가 |
| 알림 3종 고정 | 확장 불가한 하드코딩 구조 | 트리거 기반 동적 알림 시스템 |
| 메시지 개인화 없음 | 고정 문구 사용 | streak, 감정, 컨디션 데이터 기반 동적 메시지 |
| 딥링크 없음 | 알림 탭 시 앱 열기만 | actionTypeId별 라우팅 (꿈 기록/체크인/리포트 직행) |
| 빈도 조절 없음 | 매일 같은 시간 고정 | 이탈 위험 시 빈도 증가, 활성 시 감소 |
| 주간 리포트 토글 미노출 | 설정 UI에 없음 | NotificationSettings에 주간 리포트 토글 추가 |
| A/B 테스트 불가 | 단일 메시지 | 메시지 변형 + 성과 측정 파이프라인 |

---

## 4. 리텐션 루프 분석 (Retention Loops)

### 4.1 일일 루프 (Daily Habit Loop)

DreamSync의 핵심 리텐션 루프는 "아침 → 낮 → 저녁" 3단계 사이클이다:

```
[아침 알림 07:00]
    ↓
꿈 기록 (DreamCapture)
    ↓  → AI 분석 → 심볼 사전 동기화
    ↓
오늘의 예보 자동 생성 (Dashboard → ForecastCard)
    ↓  → 추천 행동 체크리스트
    ↓  → 코치 플랜 생성 (CoachPlanCard)
    ↓
[저녁 알림 21:00]
    ↓
저녁 체크인 (CheckIn 4단계)
    ↓  → 예보 자동 검증
    ↓
어제 예보 리뷰 (ForecastReviewCard - 1탭 피드백)
    ↓
streak 업데이트 → 통계 갱신
    ↓
[다음 날 아침] → 루프 반복
```

### 4.2 주간 루프 (Weekly Habit Loop)

```
월~토: 일일 루프 반복
    ↓
[일요일 10:00 알림]
    ↓
주간 리포트 (WeeklyReport)
    ├── 요약 통계: 꿈 기록수, 체크인율, 평균 컨디션, 예보 정확도
    ├── 일별 컨디션 차트
    ├── 감정 분석 (빈도 기반)
    ├── 심볼 분석 (빈도 기반)
    ├── 주간 코치 목표 달성률 (3개 축)
    ├── 행동 실험 결과 (실천 vs 미실천 비교)
    ├── 코치 플랜 이행률
    ├── 인사이트 (자동 생성)
    └── 공유 기능 (Web Share API / 클립보드)
    ↓
목표 추천 (getSuggestedGoals - 14일 데이터 기반)
    ↓
다음 주 목표 조정 (+/- 버튼)
```

### 4.3 리텐션 루프 강점 분석

| 메커니즘 | 구현 위치 | 효과 |
|----------|-----------|------|
| **Streak 가시화** | Dashboard StatCard (`checkInStats.streak`) | 연속 기록 유지 동기 부여 |
| **예보 정확도 피드백** | ForecastReviewCard (1탭) | 사용자 데이터 기여 → AI 개선 → 가치 인지 |
| **추천 행동 체크리스트** | ForecastCard suggestions | 마이크로 목표로 참여 유도 |
| **코치 플랜** | CoachPlanCard (최대 5개 태스크) | 개인화된 일일 행동 가이드 |
| **패턴 경보** | PatternAlertCard (compound/stress/condition/sleep/nightmare) | 위기 감지 → 케어 행동 → 신뢰 구축 |
| **목표 복구 플랜** | GoalRecoveryCard (주간 목표 미달 시) | 뒤처짐 인식 → 보정 행동 → 목표 재궤도 |
| **Quick Action 하이라이트** | QuickActionCard (`highlight={todayDreams.length === 0}`) | 미완료 액션 시각적 강조 |
| **완료 피드백** | QuickActionCard (`completed={checkedInToday}`) | 달성감 제공 (체크 아이콘 + 색상 변경) |

### 4.4 리텐션 루프 약점

1. **가변 보상(Variable Reward) 부재**: 매일 동일한 구조, 서프라이즈 요소 없음
2. **소셜 요소 없음**: 개인 사용에 국한, 커뮤니티/공유 루프 미구현
3. **마일스톤 보상 없음**: streak 7일, 30일 등 달성 시 특별 피드백 없음
4. **콘텐츠 갱신 없음**: AI 분석 외 추가 콘텐츠(꿈 해석 칼럼, 웰니스 팁 등) 없음
5. **진행도 시각화 부족**: 장기 트렌드(월/분기) 차트 없음

---

## 5. 코치 시스템 분석 (Coach System)

### 5.1 아키텍처

DreamSync의 코치 시스템은 3개 서비스 + 2개 스토어로 구성된다:

```
[데이터 소스]
patternAlertService → 상태 악화 시그널 5종
forecastService → 오늘 예보 + 추천 행동
goalRecoveryService → 주간 목표 미달 복구 플랜
         ↓
[통합 엔진]
coachPlanService.buildCoachPlan() → 우선순위 정렬 → 최대 5개 태스크
         ↓
[저장]
useCoachPlanStore → 일별 플랜 저장/토글/통계
useGoalStore → 주간 목표 저장/진행률/추천
```

### 5.2 코치 태스크 생성 로직

**우선순위 체계 (높은 순):**

| 순위 | 소스 | 예시 | priority |
|------|------|------|----------|
| 1 | 패턴 경보 (alert) | "오늘 핵심 할 일 1개만 정하고 나머지는 줄이기" | 4 |
| 2 | 목표 복구 (recovery) | "오늘 저녁 체크인 완료하기" | 3~4 |
| 3 | 목표 미달 (goal) | "아침 기억이 남아있을 때 꿈 1개 기록하기" | 2~3 |
| 4 | 예보 추천 (forecast) | AI 예보 기반 추천 행동 | 2 |

**중복 제거**: `uniqByTitle()` - 제목 기준 lowercase 비교로 중복 태스크 제거

### 5.3 주간 목표 시스템

**기본 목표값 (`DEFAULT_WEEKLY_GOALS`):**
- 체크인: 5일/주
- 꿈 기록: 4개/주
- 평균 수면: 7시간

**목표 추천 알고리즘 (`getSuggestedGoals`):**
- 최근 14일 데이터 기반
- 현재 달성하면 +1 스텝 상향
- 미달성이면 현재 평균 수준으로 조정
- confidence: high(10+ 데이터) / medium(5~9) / low(<5)

**목표 조정 UI (WeeklyReport):**
- +/- 버튼으로 수동 조정 (체크인/꿈: 정수, 수면: 0.5시간 단위)
- 추천 목표 1탭 적용 (`applySuggestedGoals`)

### 5.4 목표 복구 플랜

**리스크 레벨 판정 (`goalRecoveryService.js:115-126`):**
- **high**: 수면 gap >= 1시간 또는 일일 필요량 > 1
- **medium**: 2개 이상 항목 미달
- **low**: 1개 항목 소폭 미달

**복구 태스크 생성 (`buildRecoveryTasks`):**
- 최대 3개, 우선순위 내림차순 정렬
- 체크인: 이미 했으면 "내일 알림 예약", 안 했으면 "오늘 체크인 완료"
- 꿈: 이미 기록했으면 "감정/심볼 보강", 없으면 "꿈 1개 기록"
- 수면: "취침 30분 앞당기기"

### 5.5 코치 시스템 강점

1. **다중 데이터 소스 통합**: 경보 + 예보 + 목표를 하나의 플랜으로 통합
2. **컨텍스트 인식**: 오늘 이미 체크인/꿈 기록 여부에 따라 태스크 내용 변경
3. **완료 상태 보존**: 플랜 갱신 시 기존 완료 태스크는 title 기준으로 보존
4. **주간 통계**: `getRecentPlanStats()`로 7일간 활성 일수, 이행률 추적
5. **점진적 목표 상향**: 달성 시 자동으로 한 단계 높은 목표 추천

### 5.6 코치 시스템 약점

1. **시간대 인식 없음**: 오전/오후/저녁에 따른 태스크 필터링 없음
2. **맞춤형 메시지 부재**: 코치 태스크가 고정 문구, 개인화된 격려/동기부여 메시지 없음
3. **달성 축하 없음**: 코치 플랜 100% 완료 시 특별 피드백 없음
4. **장기 추이 없음**: 코치 이행률의 주간/월간 트렌드 시각화 없음
5. **학습 피드백 루프 미완성**: 어떤 태스크가 실제 컨디션 개선에 효과적이었는지 분석 없음

---

## 6. 재참여 전략 (Re-engagement Strategy)

### 6.1 현재 상태

**구현된 재참여 메커니즘:**
- 매일 반복 알림 (아침/저녁) - 이탈자에게도 동일하게 발송
- 주간 리포트 알림 (일요일) - 비활동자에게도 발송

**미구현 재참여 메커니즘:**
- 이탈 감지 후 맞춤형 복귀 알림 없음
- 비활동 기간별 차등 메시지 없음
- 윈백(Win-back) 캠페인 시스템 없음
- 복귀 사용자 전용 온보딩 플로우 없음

### 6.2 이탈 패턴 예측 시그널

현재 코드에서 추출 가능한 이탈 예측 시그널:

| 시그널 | 데이터 소스 | 위험도 |
|--------|-------------|--------|
| streak 끊김 | `getStreak()` 0 반환 | medium |
| 3일 연속 무활동 | `getRecentLogs(userId, 3).length === 0` | medium |
| 주간 목표 0% 달성 | `getWeeklyProgress().progress` 전체 미달 | high |
| 알림 비활성화 | `notifications.enabled: false` | high |
| 온보딩 미완료 | `onboardingCompleted: false` | critical |

### 6.3 제안: 이탈 단계별 윈백 시나리오

| 단계 | 비활동 기간 | 알림 전략 | 메시지 예시 |
|------|-------------|-----------|-------------|
| **1차 넛지** | 2일 | 아침 알림 메시지 변경 | "어제 꿈은 어땠나요? 기록하지 않아도 괜찮아요, 오늘만 한번 들러보세요" |
| **2차 케어** | 5일 | 저녁 알림 + 케어 메시지 | "요즘 좀 바쁘셨나요? 30초 체크인으로 다시 시작해보세요" |
| **3차 가치 리마인드** | 10일 | 주간 요약 | "지난 [N]주간 [꿈 N개, 체크인 N회] 기록이 쌓여있어요. 패턴을 확인해볼까요?" |
| **4차 리셋 제안** | 21일 | 목표 리셋 | "새로운 시작도 좋아요. 이번 주 목표를 가볍게 설정해볼까요?" |
| **5차 최종** | 30일 | 월간 인사이트 | "한 달간의 꿈 패턴 리포트가 준비되었어요" |

---

## 7. 감정적 연결 (Emotional Connection)

### 7.1 현재 감정 데이터 활용 현황

DreamSync는 풍부한 감정 데이터를 수집하지만, CRM/커뮤니케이션에서의 활용은 제한적이다.

**수집되는 감정 데이터:**
- 체크인: `emotions[]` (최대 3개 감정 태그), `condition` (1-5), `stressLevel` (1-5)
- 꿈 분석: `analysis.emotions[]`, `analysis.intensity`, `analysis.themes[]`
- 예보: `prediction.condition`, `prediction.suggestions[]`

**현재 감정 데이터 활용:**
1. 주간 리포트 감정 통계 (`emotionStats` - `WeeklyReport.jsx:85-99`)
2. 패턴 경보 (`patternAlertService.js` - 스트레스/컨디션 모니터링)
3. 인사이트 자동 생성 (`generateInsight` - 컨디션/감정 기반 텍스트)

**미활용 기회:**
| 데이터 | 현재 | 잠재적 활용 |
|--------|------|-------------|
| 주요 감정 | 리포트 통계만 | 알림 메시지 개인화 ("요즘 '불안'이 자주 보여요. 오늘은 가볍게 산책 어때요?") |
| 컨디션 추이 | 차트 표시만 | 하향 시 선제적 케어 메시지 |
| 꿈 심볼 | 사전 저장만 | 반복 심볼 기반 인사이트 ("'물' 심볼이 3주째 등장 - 감정 정화 시기일 수 있어요") |
| 예보 정확도 | 수치만 표시 | 정확도 상승 시 "AI가 당신을 잘 알아가고 있어요" 피드백 |
| 행동 실험 결과 | 비교 수치만 | "추천 행동 실천한 날 컨디션이 [N]점 높았어요" 강화 메시지 |

### 7.2 개인화 커뮤니케이션 제안

**시간대별 개인화:**
- 아침 (꿈 기록): 어젯밤 수면 품질 데이터 기반 → "7시간 푹 주무셨네요! 꿈은 기억나시나요?"
- 저녁 (체크인): 오늘 예보 실천 여부 기반 → "오늘 추천 행동 2개를 실천했어요! 하루 마무리 체크인 해볼까요?"
- 주말 (리포트): 주간 성과 기반 → "이번 주 streak 7일! 꾸준함이 패턴을 만들어요"

**감정 기반 개인화:**
- 긍정 패턴 감지: "최근 3일 연속 좋은 컨디션! 무엇이 도움이 되었는지 기록해두세요"
- 부정 패턴 감지: (이미 patternAlert로 구현) + 알림 메시지에 반영
- 감정 변화 감지: "어제 '불안'에서 오늘 '평온'으로 변했어요. 좋은 변화네요!"

---

## 8. 자동화 시나리오 (Automation Scenarios)

### 8.1 트리거 기반 자동 메시지 20개 제안

#### A. 온보딩 & 활성화 (L0 → L1)

| # | 트리거 | 타이밍 | 메시지 |
|---|--------|--------|--------|
| 1 | 가입 완료 | 즉시 | "환영해요! 첫 꿈을 기록하면 AI 분석이 시작돼요" |
| 2 | 온보딩 미완료 | D1 아침 | "온보딩 마무리하고 알림을 설정해보세요. 1분이면 끝나요" |
| 3 | 첫 꿈 기록 | 즉시 | "첫 꿈이 분석되었어요! 어떤 심볼이 나왔는지 확인해보세요" |
| 4 | 첫 체크인 완료 | 즉시 | "첫 체크인 완료! 내일 아침 당신의 첫 예보가 생성될 거예요" |
| 5 | D3 무활동 | D3 저녁 | "아직 기록이 3개 미만이에요. AI 예보는 데이터가 쌓일수록 정확해져요" |

#### B. 습관 형성 & 강화 (L1 → L2 → L3)

| # | 트리거 | 타이밍 | 메시지 |
|---|--------|--------|--------|
| 6 | streak 3일 달성 | 체크인 직후 | "3일 연속 기록! 좋은 리듬이에요" |
| 7 | streak 7일 달성 | 체크인 직후 | "1주일 연속 기록 달성! 습관이 만들어지고 있어요" |
| 8 | streak 30일 달성 | 체크인 직후 | "30일 연속! 당신의 무의식 패턴이 선명해지고 있어요" |
| 9 | 주간 목표 100% 달성 | 일요일 리포트 시 | "이번 주 목표 완벽 달성! 다음 주 목표를 한 단계 올려볼까요?" |
| 10 | 예보 정확도 70%+ 달성 | 리포트 시 | "AI 예보 정확도가 70%를 넘었어요. 데이터의 힘이에요!" |

#### C. 케어 & 위기 관리

| # | 트리거 | 타이밍 | 메시지 |
|---|--------|--------|--------|
| 11 | 스트레스 4+ 3일 연속 | 다음 날 아침 | "최근 스트레스가 높아요. 오늘은 부담을 줄이고 회복 시간을 가져보세요" |
| 12 | 컨디션 2 이하 3일 연속 | 다음 날 아침 | "요즘 컨디션이 낮게 유지되고 있어요. 수면 패턴을 점검해볼까요?" |
| 13 | 악몽 패턴 감지 | 다음 날 저녁 | "최근 꿈 강도가 높아요. 취침 전 명상이나 독서를 시도해보세요" |
| 14 | 수면 6시간 미만 3일 | 해당 저녁 | "수면 부족이 쌓이고 있어요. 오늘은 30분 일찍 취침해보세요" |

#### D. 재참여 & 윈백

| # | 트리거 | 타이밍 | 메시지 |
|---|--------|--------|--------|
| 15 | 2일 무활동 | D2 저녁 | "어제 꿈은 어땠나요? 간단히 한 줄만 기록해도 괜찮아요" |
| 16 | 5일 무활동 | D5 아침 | "잠시 쉬어가는 것도 좋아요. 준비되면 30초 체크인으로 다시 시작해보세요" |
| 17 | streak 끊김 | 다음 날 아침 | "[N]일 streak이 끊겼어요. 하지만 괜찮아요, 오늘 다시 시작하면 돼요!" |
| 18 | 14일 무활동 | D14 | "2주간 [N]개의 꿈이 분석 대기 중이에요... (라고 말하고 싶지만) 다시 만나서 반가워요!" |

#### E. 가치 인식 & 성장

| # | 트리거 | 타이밍 | 메시지 |
|---|--------|--------|--------|
| 19 | 행동 실험 결과 양호 | 주간 리포트 | "추천 행동을 실천한 날, 컨디션이 평균 [N]점 더 높았어요" |
| 20 | 월간 요약 생성 | 매월 1일 | "지난달 꿈 [N]개, 체크인 [N]회. 한 달간의 무의식 여정을 확인해보세요" |

---

## 9. KPI 프레임워크

### 9.1 핵심 지표 (North Star Metric)

**North Star: "주 3일 이상 활동하는 사용자 비율 (WAU/MAU)"**

이유: DreamSync의 가치는 데이터 축적 → 패턴 인식 → 예측 정확도 향상의 선순환에 있으며, 이는 최소 주 3일 이상 사용해야 체감 가능

### 9.2 계층별 KPI

#### Tier 1: 비즈니스 메트릭

| 지표 | 정의 | 목표값 | 측정 소스 |
|------|------|--------|-----------|
| DAU/MAU | 일간 활성/월간 활성 비율 | 25%+ | 로그인 + 활동 로그 |
| WAU/MAU | 주간 활성/월간 활성 비율 | 50%+ | 주 1회+ 활동 |
| D1/D7/D30 리텐션 | 가입 후 1/7/30일 복귀율 | 60/30/20% | 코호트 분석 |
| FTUE 완료율 | 온보딩 완료 비율 | 80%+ | `onboardingCompleted` |

#### Tier 2: 참여 메트릭

| 지표 | 정의 | 목표값 | 측정 소스 |
|------|------|--------|-----------|
| 주간 체크인 완료율 | 주 7일 중 체크인 일수 | 5일/주 (71%) | `getWeeklyCompletionRate()` |
| 주간 꿈 기록 수 | 주당 꿈 기록 개수 | 3개+/주 | `getRecentDreams(7)` |
| Streak 분포 | 연속 기록 일수 분포 | 중위값 7일+ | `getStreak()` |
| 코치 플랜 이행률 | 플랜 태스크 완료율 | 60%+ | `getRecentPlanStats()` |
| 예보 검증률 | 예보 중 사용자 검증 비율 | 50%+ | `getReviewStats()` |
| 주간 목표 달성률 | 3개 목표 중 달성 수 | 2개+/주 | `getWeeklyProgress()` |

#### Tier 3: 제품 건강 메트릭

| 지표 | 정의 | 목표값 | 측정 소스 |
|------|------|--------|-----------|
| 예보 정확도 | AI 예보와 실제 컨디션 일치율 | 65%+ | `getAverageAccuracy()` |
| 알림 허용률 | 알림 권한 승인 비율 | 70%+ | `hasPermission` |
| 기능 플래그 채택률 | 웨어러블/UHS 활성화 비율 | 20%+ | `useFeatureFlagStore` |
| 에러 발생률 | 세션 당 에러 비율 | <1% | ErrorBoundary + error states |

### 9.3 코호트 분석 프레임워크

**가입 주차별 리텐션 곡선:**

```
Week 0: 100% (가입)
Week 1: ???% (첫 꿈 기록 + 체크인 시작)
Week 2: ???% (습관 형성 시작 - 핵심 구간)
Week 4: ???% (주간 리포트 2회+ 확인)
Week 8: ???% (장기 사용자 안착)
Week 12: ???% (핵심 팬 - 유지 목표 그룹)
```

**주요 관찰 포인트:**
- W1 → W2 드롭: 온보딩 마찰 또는 첫 가치 체감 실패
- W2 → W4 드롭: 습관 형성 실패 (코치 시스템 효과 측정 구간)
- W4 이후 안정화: 장기 리텐션 안착 여부

### 9.4 현재 코드에서 측정 가능한 지표

| 지표 | 코드 위치 | 현재 상태 |
|------|-----------|-----------|
| streak | `useCheckInStore.getStreak()` | 즉시 측정 가능 |
| 주간 완료율 | `useCheckInStore.getWeeklyCompletionRate()` | 즉시 측정 가능 |
| 평균 컨디션 | `useCheckInStore.getAverageCondition()` | 즉시 측정 가능 |
| 주요 감정 | `useCheckInStore.getTopEmotions()` | 즉시 측정 가능 |
| 목표 달성률 | `useGoalStore.getWeeklyProgress()` | 즉시 측정 가능 |
| 코치 이행률 | `useCoachPlanStore.getRecentPlanStats()` | 즉시 측정 가능 |
| 예보 정확도 | `useForecastStore.getAverageAccuracy()` | 즉시 측정 가능 |
| 행동 실험 | `useForecastStore.getExperimentSummary()` | 즉시 측정 가능 |
| 예보 검증 | `useForecastStore.getReviewStats()` | 즉시 측정 가능 |
| DAU/WAU/MAU | - | **미구현** (서버사이드 분석 필요) |
| 코호트 리텐션 | - | **미구현** (가입일 기반 추적 필요) |
| 알림 CTR | - | **미구현** (알림 → 앱 열기 추적 필요) |

---

## 10. 종합 평가 및 우선순위 로드맵

### 10.1 현재 상태 요약

| 영역 | 성숙도 | 점수 |
|------|--------|------|
| 일일 리텐션 루프 | 매우 우수 (예보→행동→체크인→검증 풀사이클) | 9/10 |
| 주간 리텐션 루프 | 우수 (리포트+목표+코치 통합) | 8/10 |
| 코치 시스템 | 우수 (경보+예보+목표 3축 통합) | 8/10 |
| 알림 시스템 | 기본 구현 (3종 고정, 개인화 없음) | 5/10 |
| 세그먼트/타게팅 | 미구현 (데이터는 있으나 분류 체계 없음) | 2/10 |
| 재참여 전략 | 미구현 (이탈 감지/윈백 시스템 없음) | 1/10 |
| 감정적 커뮤니케이션 | 부분 구현 (패턴 경보만, 알림 미적용) | 3/10 |
| KPI 측정 | 앱 내 측정 가능하나 분석 파이프라인 부재 | 4/10 |

### 10.2 우선순위 개선 로드맵

**Phase A (즉시 실행 - 코드 변경 최소)**
1. 알림 메시지 개인화: streak/컨디션 데이터를 아침/저녁 알림 텍스트에 반영
2. 주간 리포트 알림 토글 UI 추가 (NotificationSettings)
3. 알림 딥링크 구현 (actionTypeId별 라우팅)

**Phase B (단기 - 1~2주)**
4. `useLifecycleStore` 신설: 사용자 단계 추적 + 마지막 활동일
5. 이탈 감지 로직: 비활동 일수 기반 이탈 위험 분류
6. 비활동 사용자 알림 메시지 차등화 (2일/5일/14일)
7. 마일스톤 축하: streak 3/7/14/30일 달성 시 특별 피드백

**Phase C (중기 - 2~4주)**
8. Analytics 파이프라인: DAU/WAU/MAU + 코호트 리텐션 측정
9. 알림 A/B 테스트 프레임워크
10. 월간 인사이트 리포트 자동 생성
11. 감정 기반 알림 개인화 엔진

**Phase D (장기 - 1~2개월)**
12. 서버사이드 푸시 알림 (이탈자에게 앱 미실행 시에도 발송)
13. 소셜 요소 (익명 커뮤니티, 꿈 공유)
14. 콘텐츠 엔진 (꿈 해석 칼럼, 웰니스 팁)
15. B2B CRM 대시보드 (기업 웰니스 프로그램)

---

## 부록: 데이터 흐름도

```
[사용자 입력]
꿈 기록 ──→ useDreamStore ──→ AI 분석 ──→ 심볼 사전
체크인 ──→ useCheckInStore ──→ streak/통계 업데이트
수면 데이터 ──→ useSleepStore ──→ confidence 계산

[자동 생성]
패턴 경보 ←── patternAlertService (체크인 + 꿈 데이터)
오늘 예보 ←── useForecastStore (꿈 + 체크인 데이터)
코치 플랜 ←── coachPlanService (경보 + 예보 + 목표)
목표 복구 ←── goalRecoveryService (주간 목표 진행률)

[사용자 피드백]
예보 검증 ──→ 정확도 업데이트 ──→ 다음 예보 개선
추천 행동 체크 ──→ 행동 실험 데이터 ──→ 주간 실험 결과
코치 태스크 완료 ──→ 이행률 통계 ──→ 주간 리포트

[알림 루프]
아침 07:00 ──→ 꿈 기록 유도
저녁 21:00 ──→ 체크인 유도
일요일 10:00 ──→ 주간 리포트 확인 유도
```

---

*본 보고서는 DreamSync 코드베이스의 실제 구현을 기반으로 분석되었으며, 코드 수정 없이 작성되었습니다.*
